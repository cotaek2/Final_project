<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD config 3.0//EN"
						"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="ezen.dteam.mapper.myinfoMapper">


	<select id="selectMyinfo" parameterType="String" resultType="MemberVO">
		 SELECT mid, mname, mpw, mnickNm, authority, enabled, mbirth, memail, mgender, mjoinDate, mphone, mno 
		 FROM member 
		 WHERE mid = #{value}
	</select>
	<select id="checkEmail" parameterType="String" resultType="int">
		select count(*) from member where memail = #{memail}
	</select>

	<update id="updateMyinfo" parameterType="MemberVO"> 
		Update member 
			set mname =#{mname} , mpw = #{mpw}, memail =#{memail},  
			 mphone = #{mphone} , mbirth = #{mbirth} , mgender = #{mgender} 
			where mid = #{mid}
	</update>
	<update id="deleteMyinfo" parameterType="MemberVO"> 
		Update member 
			set isWithdrawn = 1  
			where mid = #{mid}
	</update>
	<select id="selectMyticket" parameterType="TicketVO" resultType="TicketVO">
		select t.*, td.*, ss.*, sc.* from ticket t 
		inner join ticketDetail td on t.ticketno = td.ticketno 
		inner join screenSheet ss on ss.sseatno = td.sseatno 
		inner join screen sc on sc.sno = td.sno 
		where t.mno = #{value} and t.ticketDelyn = 0; 
	</select>
	
</mapper>